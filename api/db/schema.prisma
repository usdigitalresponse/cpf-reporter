generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model InputTemplate {
  id                 Int               @id @default(autoincrement())
  name               String
  version            String
  effectiveDate      DateTime          @db.Date
  rulesGeneratedAt   DateTime          @db.Timestamptz(6)
  createdAt          DateTime          @default(now()) @db.Timestamptz(6)
  updatedAt          DateTime          @db.Timestamptz(6)
  reportingPeriods   ReportingPeriod[]
}

model OutputTemplate {
  id                 Int               @id @default(autoincrement())
  name               String
  version            String
  effectiveDate      DateTime          @db.Date
  rulesGeneratedAt   DateTime          @db.Timestamptz(6)
  createdAt          DateTime          @default(now()) @db.Timestamptz(6)
  updatedAt          DateTime          @db.Timestamptz(6)
  reportingPeriods   ReportingPeriod[]
}

model ReportingPeriod {
  id               Int            @id @default(autoincrement())
  name             String
  startDate        DateTime       @db.Date
  endDate          DateTime       @db.Date
  certifiedAt      DateTime?      @db.Timestamptz(6)
  inputTemplateId  Int
  inputTemplate    InputTemplate  @relation(fields: [inputTemplateId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  outputTemplateId Int
  outputTemplate   OutputTemplate @relation(fields: [outputTemplateId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  isCurrentPeriod  Boolean        @default(false)
  createdAt        DateTime       @default(now()) @db.Timestamptz(6)
  updatedAt        DateTime 
}